@model Tour
<!-- Single Car Header-->
<div class="rn-single-car-header" style="background-image: url('@Model.Img'); background-repeat:round">
    <div class="rn-overlayer"></div>
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="rn-car-single-info">
                    <h1>@Model.Title</h1>
                    <p style="white-space:pre-wrap;color:#fff6db">@Model.Description</p>
                </div>
                <div class="rn-car-single-meta">
                    <span>
                        <i class="fa fa-check"></i> @Model.Booking đã đặt
                    </span>
                    <span>
                        <i class="rni-suitcase"></i> Có chỗ nghỉ
                    </span>
                    <span data-tooltip="Tính từ thành phố Điện Biên Phủ">
                        <i class="fa fa-car"></i> Cách @Model.Traffic km
                    </span>
                    <span>
                        <i class="fa fa-clock"></i> Mở cửa cả tuần
                    </span>
                </div>
                <div class="rn-car-single-price">
                    <span class="rn-car-price-from">Chỉ từ</span>
                    <span class="rn-car-price-format">
                        <span class="rn-car-price-amount">@(String.Format("{0:0,0}", (Model.Price ?? 0)))</span>
                        <span class="rn-car-price-per">VNĐ</span>
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- End Single Car Header-->
<!-- Single Car Content-->
<section class="rn-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <p style="white-space:pre-wrap;color: darkblue;">@Html.Raw(Model.Note)</p>
            </div>
            <div class="col-lg-4">
                <!-- Check Availability-->
                <div class="rn-small-search-form">
                    <div class="rn-small-search-form-title">
                        <h2>Lịch trình chuyến đi</h2>
                    </div>
                    <form action="@(ViewData["MessagerUrl"])" target="_blank" rel="noopener noreferrer">
                        <div class="rn-icon-input">
                            <i class="fas fa-map-marker-alt"></i>
                            <input type="text" placeholder="Điểm đón">
                        </div>
                        <div class="rn-icon-input">
                            <i class="fas fa-user"></i>
                            <input type="text" placeholder="Số người">
                        </div>
                        <div class="rn-date-time-input">
                            <div class="row">
                                <div class="col-7">
                                    <div class="rn-icon-input">
                                        <i class="far fa-calendar-alt"></i>
                                        <input type="text" placeholder="Ngày đi" id="pickup-date">
                                    </div>
                                </div>
                                <div class="col-5">
                                    <div class="rn-icon-input">
                                        <i class="far fa-clock"></i>
                                        <input type="text" placeholder="Thời gian" id="pickup-time">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="rn-date-time-input">
                            <div class="row">
                                <div class="col-7">
                                    <div class="rn-icon-input">
                                        <i class="far fa-calendar-alt"></i>
                                        <input type="text" placeholder="Ngày về" id="drop-date">
                                    </div>
                                </div>
                                <div class="col-5">
                                    <div class="rn-icon-input">
                                        <i class="far fa-clock"></i>
                                        <input type="text" placeholder="Thời gian" id="drop-time">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-main btn-lg btn-shadow btn-block" type="submit" data-tooltip="Bấm vào để liên hệ tư vấn ngay">
                            <i class="fas fa-search"></i> Đặt ngay
                        </button>
                    </form>
                </div>
                <!-- End Check Availability-->
                @if (!string.IsNullOrEmpty(Model.ContentImg))
                {
                    <img src="@Model.ContentImg" class="img-rounded" width="100%" style="margin-top: 30px;width: 140%;">
                }
                <!-- Car Sharing Buttons-->
                <div class="rn-car-share">
                    <span>Chia sẻ địa điểm này:</span>
                    <ul>
                        <li>
                            <a href="@("https://www.facebook.com/sharer/sharer.php?u="+ViewData["CurrentUrl"])" target="_blank" rel="noopener noreferrer">
                                <i class="fab fa-facebook-f"></i>
                            </a>
                        </li>
                        <li>
                            <a href="@("http://twitter.com/share?text=Im%20Sharing%20on%20Twitter&url=" +ViewData["CurrentUrl"])" target="_blank" rel="noopener noreferrer">
                                <i class="fab fa-twitter"></i>
                            </a>
                        </li>
                        <li>
                            <a href="@("https://plus.google.com/share?url=" +ViewData["CurrentUrl"])" target="_blank" rel="noopener noreferrer">
                                <i class="fab fa-google-plus-g"></i>
                            </a>
                        </li>
                        <li>
                            <a href="@("https://www.tiktok.com/")" target="_blank" rel="noopener noreferrer">
                                <svg style="color: black;" xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-tiktok" viewBox="0 0 16 16">
                                    <path d="M9 0h1.98c.144.715.54 1.617 1.235 2.512C12.895 3.389 13.797 4 15 4v2c-1.753 0-3.07-.814-4-1.829V11a5 5 0 1 1-5-5v2a3 3 0 1 0 3 3z" />
                                </svg>
                            </a>
                        </li>
                    </ul>
                </div>

                <aside style="margin-top:10px">
                    <!-- Widget Item-->
                    <section class="rn-widget">
                        <h2 class="rn-widget-title">Chọn tour theo ngày</h2>
                        <div class="rn-widget-content">
                            <ul>
                                <li style="background-color: #00d231;">
                                    <a href="/tourday/1" style="color:white; font-size: 14px; margin-left: 15px;">1 ngày</a>
                                </li>
                                <li style="background-color: #00d231;">
                                    <a href="/tourday/2" style="color:white; font-size: 14px; margin-left: 15px;">2 ngày</a>
                                </li>
                                <li style="background-color: #00d231;">
                                    <a href="/tourday/3" style="color:white; font-size: 14px; margin-left: 15px;">3 ngày</a>
                                </li>
                                <li style="background-color: #00d231;">
                                    <a href="/tourday/4" style="color:white; font-size: 14px; margin-left: 15px;">4 ngày</a>
                                </li>
                                <li style="background-color: #00d231;">
                                    <a href="/tourday/5" style="color:white; font-size: 14px; margin-left: 15px;">Từ 5 ngày</a>
                                </li>
                            </ul>
                        </div>
                    </section>
                    <!-- End Widget Item-->
                    <!-- Widget Item-->
                    <section class="rn-widget">
                        <h2 class="rn-widget-title">Tin tức</h2>
                        <div class="rn-widget-content">
                            <ul class="rn-recent-posts">
                                <!-- Extra Small Post-->
                                @{
                                    var mainData = ViewData["MainData"] as MainData;
                                    if (mainData != null && mainData.News != null)
                                    {
                                        @foreach (var item in mainData.News.OrderByDescending(e => e.Like).Skip(0).Take(3).ToList())
                                        {
                                            <li>
                                                <div class="rn-recent-post-item">
                                                    <div class="rn-recent-post-item-thumb">
                                                        <a href="@($"/news/{item.LinkUrl}")">
                                                            <img class="img-fluid" src="@(item.Img)" alt="@item.Title" />
                                                        </a>
                                                    </div>
                                                    <div class="rn-recent-post-item-info">
                                                        <div class="rn-recent-post-item-meta">
                                                            <span class="rn-post-item-author">
                                                                <span>@item.Category</span>
                                                            </span>
                                                        </div>
                                                        <div class="rn-recent-post-item-title">
                                                            <h3>
                                                                <a href="@($"/news/{item.LinkUrl}")">@item.Title</a>
                                                            </h3>
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                        }
                                    }
                                }

                                <!-- End Extra Small Post-->
                            </ul>
                        </div>
                    </section>
                    <!-- End Widget Item-->
                    <!-- Widget Item-->
                    <section class="rn-widget">
                        <h2 class="rn-widget-title">Yêu cầu liên hệ lại</h2>
                        <div class="rn-widget-content">
                            <form id="frm-contact-data" enctype="multipart/form-data" accept-charset="utf-8">
                                <div class="rn-icon-input rn-icon-top mb-30">
                                    <i>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-telephone-forward" viewBox="0 0 16 16">
                                            <path d="M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.483.484-.661 1.169-.45 1.77a17.568 17.568 0 0 0 4.168 6.608 17.569 17.569 0 0 0 6.608 4.168c.601.211 1.286.033 1.77-.45l1.034-1.034a.678.678 0 0 0-.063-1.015l-2.307-1.794a.678.678 0 0 0-.58-.122l-2.19.547a1.745 1.745 0 0 1-1.657-.459L5.482 8.062a1.745 1.745 0 0 1-.46-1.657l.548-2.19a.678.678 0 0 0-.122-.58L3.654 1.328zM1.884.511a1.745 1.745 0 0 1 2.612.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511zm10.762.135a.5.5 0 0 1 .708 0l2.5 2.5a.5.5 0 0 1 0 .708l-2.5 2.5a.5.5 0 0 1-.708-.708L14.293 4H9.5a.5.5 0 0 1 0-1h4.793l-1.647-1.646a.5.5 0 0 1 0-.708z" />
                                        </svg>
                                    </i>
                                    <input type="text" name="Phone" placeholder="Số điện thoại" required>
                                </div>
                                <div class="rn-icon-input rn-icon-top mb-30">
                                    <i class="far fa-envelope"></i>
                                    <input type="text" name="Email" placeholder="Địa chỉ Email">
                                </div>
                                <div class="rn-icon-input rn-icon-top mb-30">
                                    <i class="far fa-comment"></i>
                                    <textarea name="Note" placeholder="Lời nhắn" rows="3"></textarea>
                                </div>
                                <div class="text-right">
                                    <input class="btn btn-main btn-lg btn-shadow" type="button" value="Gửi thông tin" onclick="SendInfo()">
                                </div>
                            </form>
                        </div>
                    </section>
                    <!-- End Widget Item-->
                </aside>
            </div>
        </div>
    </div>
</section>
<!-- End Single Car Content-->
<!-- Car Reviews-->
<div class="rn-section rn-section-light-gray">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">

                <!-- Car Reviews-->
                <div class="rn-reviews mb-50">
                    <h2 class="rn-simple-title">Nhận xét của khách hàng</h2>

                    <!-- Review Item-->
                    @{
                        var lstReviews = (ViewData["MainData"] as MainData)?.Reviews ?? new List<Review>();
                        foreach (var review in lstReviews.Take(3).ToList())
                        {
                            <div class="rn-review-item">
                                <div class="rn-review-meta">
                                    <img src="@(review.Img)" alt="@review.Name" style="width:60px; height:60px;" />
                                    <div class="rn-reviewer-info">
                                        <div class="rn-reviewer-name">@review.Name</div>
                                        <div class="rn-review-time">(@review.ReviewDate.GetValueOrDefault().ToString("dd/MM/yyyy HH:mm"))</div>
                                    </div>
                                </div>
                                <div class="rn-review-content">
                                    <div class="rn-review-ratings">
                                        <div class="rn-review-rating">
                                            <div class="rn-review-rating-title">Phong cảnh:</div>
                                            <div class="rn-review-rating-stars">
                                                @for (int i = 0; i < @review.Rate; i++)
                                                {
                                                    <i class="fas fa-star"></i>
                                                }
                                            </div>
                                        </div>
                                        <div class="rn-review-rating">
                                            <div class="rn-review-rating-title">Đồ ăn:</div>
                                            <div class="rn-review-rating-stars">
                                                @for (int i = 0; i < @review.Rate; i++)
                                                {
                                                    <i class="fas fa-star"></i>
                                                }
                                            </div>
                                        </div>
                                        <div class="rn-review-rating">
                                            <div class="rn-review-rating-title">Phục vụ:</div>
                                            <div class="rn-review-rating-stars">
                                                @for (int i = 0; i < @review.Rate; i++)
                                                {
                                                    <i class="fas fa-star"></i>
                                                }
                                            </div>
                                        </div>
                                    </div>
                                    <div class="rn-review-body">
                                        <p>@review.Content</p>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                    <div class="text-center">
                        <a class="btn btn-lg btn-outline-light" href="#">Load More</a>
                    </div>
                </div>
                <!-- End Car Reviews-->
            </div>
        </div>
    </div>
</div>
<!-- End Car Reviews-->
<!-- Similar Cars-->
<section class="rn-car-list rn-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">

                <!-- Section Title-->
                <div class="rn-section-title">
                    <h2 class="rn-title">Các điểm đến khác</h2>
                    <p>Còn nhiều điểm đến hấp dẫn khác nữa để bạn lựa chọn.</p>
                    <span class="rn-title-bg">Các điểm đến khác</span>
                </div>

            </div>
            @{
                var lstTours = (ViewData["MainData"] as MainData)?.Tours ?? new List<Tour>();
                @foreach (var tour in lstTours.Where(e => e.Id != Model.Id).Take(3).OrderByDescending(e => e.Rate).ToList())
                {
                    <div class="col-lg-4 col-md-6" data-tooltip="Bấm vào để liên hệ tư vấn ngay">
                        <div class="rn-car-item">
                            <div class="rn-car-item-review">
                                <div class="fas fa-star"></div> @tour.Rate
                            </div>
                            <div class="rn-car-item-thumb">
                                <a href="@("/tour/"+tour.LinkUrl)">
                                    <img class="img-fluid" src="@(tour.Img)" alt="@tour.Title" />
                                </a>
                            </div>
                            <div class="rn-car-item-info">
                                <h3>
                                    <a href="@("/tour/"+tour.LinkUrl)">@tour.Title</a>
                                </h3>
                                <p style="white-space:pre-wrap;">@tour.Description</p>
                                <div class="rn-car-list-n-price">
                                    @* <ul>
                            @foreach (var desc in tour.TourDescriptions)
                            {
                            <li>@desc.Description</li>
                            }
                            </ul> *@
                                    <div style="margin-right:15px;width: 40%;">
                                        <div>
                                            <i class="fa fa-check"></i> @tour.Booking đã đặt
                                        </div>
                                        <div>
                                            <i class="rni-suitcase"></i> Có chỗ nghỉ
                                        </div>
                                        <div data-tooltip="Tính từ thành phố Điện Biên Phủ">
                                            <i class="fa fa-car"></i> Cách @tour.Traffic km
                                        </div>
                                        <div>
                                            <i class="fa fa-calendar"></i> @tour.DayNumbers ngày
                                        </div>
                                    </div>
                                    <div class="rn-car-price-wrap">
                                        <a class="rn-car-price" href="@(ViewData["MessagerUrl"])" target="_blank" rel="noopener noreferrer">
                                            <span class="rn-car-price-from">Chỉ từ</span>
                                            <span class="rn-car-price-format">
                                                <span class="rn-car-price-amount">@(String.Format("{0:0,0}", (tour.Price ?? 0)))</span>
                                                <span class="rn-car-price-per">VNĐ</span>
                                            </span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            }
        </div>
    </div>
</section>
<!-- End Similar Cars-->
<script>
    function SendInfo() {
        $.ajax({
            url: '@Url.Action("AddBookContact", "Home")',
            method: "POST",
            data: $("#frm-contact-data").serialize(),
            success: function (data) {
                alert("Để lại yêu cầu thành công! Chúng tôi sẽ sớm liên hệ lại cho bạn.")
            }
        });
    }
</script>